[Tests]
  design = 'MeshGenerator.md'
  issues = '#29095'
  requirement = 'The system shall support Constructive Solid Geometry (CSG) generation of meshes using --csg-only mode using a MOOSE mesh input file.'

  [geometry]
    requirement = "The system shall correctly construct a CSG geometry that "
    [csg_only]
        type = 'JSONDiff'
        input = 'csg_only_inf_planes.i'
        cli_args = '--csg-only'
        jsondiff = 'csg_only_inf_planes_out_csg.json'
        recover = false
        mesh_mode = REPLICATED
        detail = 'has a single CSGBase instance with planes constructed from 3 points and can generate a unique cell.'
    []
    [csg_only_chained]
        type = 'JSONDiff'
        input = 'csg_only_chained.i'
        cli_args = '--csg-only'
        jsondiff = 'csg_only_chained_out_csg.json'
        recover = false
        mesh_mode = REPLICATED
        detail = 'passes a single CSGBase object between MeshGenerators to be updated by updating the region of an existing cell and constructing planes from coefficients.'
    []
    [csg_only_cylinders_universes]
        type = 'JSONDiff'
        input = 'csg_cylinders_universes.i'
        cli_args = '--csg-only'
        jsondiff = 'csg_cylinders_universes_out_csg.json'
        recover = false
        mesh_mode = REPLICATED
        detail = 'joins multiple CSGBase objects into a new CSGBase to create one object with multiple universes and constructing cylinder surfaces aligned with each axis.'
    []
    [csg_only_spheres_join_roots]
        type = 'JSONDiff'
        input = 'csg_spheres_joinroot.i'
        cli_args = '--csg-only'
        jsondiff = 'csg_spheres_joinroot_out_csg.json'
        recover = false
        mesh_mode = REPLICATED
        detail = 'joins multiple CSGBase objects from various MeshGenerator types together into one universe and constructs sphere surfaces with and without a center point specified.'
    []
    [csg_only_final_generator]
        type = 'JSONDiff'
        input = 'csg_only_chained.i'
        cli_args = 'Mesh/final_generator=inf_square --csg-only csg_only_inf_planes_out_csg.json'
        jsondiff = 'csg_only_inf_planes_out_csg.json'
        recover = false
        mesh_mode = REPLICATED
        detail = 'specifies a final generator to create a CSGBase object for an intermediate generator.'
    []
    [all_region_types]
        type = 'JSONDiff'
        input = 'csg_only_region_types.i'
        cli_args = '--csg-only'
        jsondiff = 'csg_only_region_types_out_csg.json'
        recover = false
        mesh_mode = REPLICATED
        detail = 'correctly defines regions as a combination of halfspaces, intersections, unions, and complements.'
    []
  []
  [errors]
    requirement = 'The system shall report an error when generating a mesh in CSG only mode when'
    [csg_only_chained_not_moved]
      type = 'RunException'
      input = 'csg_only_chained_not_moved.i'
      detail = ' a CSG object from an input mesh generator is not moved upon retrieval'
      cli_args = '--csg-only'
      expect_err = "The CSG mesh from input TestCSGInfiniteSquareMeshGenerator 'csg_inf_square' was not moved."
    []
    [region_surfaces_error]
      type = 'RunException'
      input = 'csg_region_surfs_error.i'
      detail = ' a cell region is updated with surfaces not present in the CSGBase instance'
      cli_args = '--csg-only'
      expect_err = "Region is being set with a surface named surf_plus_x that is different from the surface of the same name in the base instance."
    []
    [rename_surface_error]
      type = 'RunException'
      input = 'csg_rename_surf_error.i'
      detail = ' a surface is renamed but the surface object does not match that of the same current name in the base.'
      cli_args = '--csg-only'
      expect_err = "Surface surf_plus_x cannot be renamed to test_new_surf_name as it does not exist in this CSGBase instance."
    []
    [rename_cell_error]
      type = 'RunException'
      input = 'csg_rename_cell_error.i'
      detail = ' a cell is renamed but the cell object does not match that of the same current name in the base.'
      cli_args = '--csg-only'
      expect_err = "Cell square_cell cannot be renamed to test_new_cell_name as it does not exist in this CSGBase instance."
    []
    [rename_universe_error]
      type = 'RunException'
      input = 'csg_rename_univ_error.i'
      detail = ' a universe is renamed but the universe object does not match that of the same current name in the base.'
      cli_args = '--csg-only'
      expect_err = "Universe ROOT_UNIVERSE cannot be renamed to test_new_univ_name as it does not exist in this CSGBase instance."
    []
    [distributed_mesh]
      type = RunException
      input = 'csg_only_inf_planes.i'
      detail = ' used in conjunction with distributed mesh command line option'
      cli_args = '--distributed-mesh --csg-only'
      expect_err = "--csg-only cannot be used in conjunction with --distributed-mesh"
    []
    [split_mesh]
      type = RunException
      input = 'csg_only_inf_planes.i'
      detail = ' used in conjunction with split mesh command line option'
      cli_args = '--split-mesh split_mesh --csg-only'
      expect_err = "--csg-only is not compatible with any mesh splitting options"
      mesh_mode = REPLICATED
    []
    [use_split]
      type = RunException
      input = 'csg_only_inf_planes.i'
      detail = ' used in conjunction with use split command line option'
      cli_args = '--use-split --csg-only'
      expect_err = "--csg-only is not compatible with any mesh splitting options"
      mesh_mode = REPLICATED
    []
    [split_file]
      type = RunException
      input = 'csg_only_inf_planes.i'
      detail = ' used in conjunction with split file command line option'
      cli_args = '--split-file split_file --csg-only'
      expect_err = "--csg-only is not compatible with any mesh splitting options"
      mesh_mode = REPLICATED
    []
    [refinements]
      type = RunException
      input = 'csg_only_inf_planes.i'
      detail = ' used in conjunction with mesh refinements command line option'
      cli_args = '-r 5 --csg-only'
      expect_err = "--csg-only cannot be used in conjunction with -r refinements option"
      mesh_mode = REPLICATED
    []
    [recover]
      type = RunException
      input = 'csg_only_inf_planes.i'
      detail = ' used in conjunction with recovery command line option'
      cli_args = '--recover --csg-only'
      expect_err = "--csg-only option cannot be used in recovery mode"
      mesh_mode = REPLICATED
    []
  []
[]
