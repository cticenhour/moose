# Boundary2DDelaunayGenerator

!syntax description /Mesh/Boundary2DDelaunayGenerator

## Overview

This `Boundary2DDelaunayGenerator` utilizes the 2D triangulation capabilities in the XY-plane, which is adopted by [`XYDelaunayGenerator`](XYDelaunayGenerator.md) and extends it to support more generalized 2D surface cases. The input of this generator is not limited to a 2D mesh residing in the XY-plane. Instead, it can accept a 2D mesh with curvature in the 3D space.

The input of this mesh generator is defined by a mesh name ([!param](/Mesh/Boundary2DDelaunayGenerator/input)) along with a list of boundary names ([!param](/Mesh/Boundary2DDelaunayGenerator/boundary_names)) within it. The generator will extract the specified boundaries from the input mesh and generate a 2D mesh through Delaunay triangulation based on them. The output mesh can be further processed and then used as input for 3D Delaunay mesh generation ([XYZelaunayGenerator](XYZDelaunayGenerator.md)). This mesh generator also supports hole meshes defined as boundaries ([!param](/Mesh/Boundary2DDelaunayGenerator/hole_boundary_names)) in the input mesh as well as the automatic area control ([!param](/Mesh/Boundary2DDelaunayGenerator/use_auto_area_func)).

## Methods

The same methods adopted by [`XYDelaunayGenerator`](XYDelaunayGenerator.md) are called by this mesh generator. To support a generalized 2D surface (see [bdry_2d_delaunay]a), the following approaches are implemented:

- An average normal vector of the given 2D surface is computed based on the normal vectors of the elements weighted by their areas.
- The 2D surface is then rotated and translated so that its centroid is on the XY-plane and the average normal vector is aligned with the Z-axis (see [bdry_2d_delaunay]b).
- The 2D surface is projected onto the XY-plane so that the triangulation method can be applied (see [bdry_2d_delaunay]c).
- The new 2D mesh in the XY-plane is generated through Delaunay triangulation (same as [`XYDelaunayGenerator`](XYDelaunayGenerator.md))(see [bdry_2d_delaunay]d).
- The new 2D mesh is reversely projected back to the original 3D space based on the original 2D surface.
- The new 2D mesh is translated and rotated back to the original position of the 2D surface (see [bdry_2d_delaunay]e).
- Optionally, the nodes in the new 2D mesh can be corrected using a provided level set function of the surface ([!param](/Mesh/Boundary2DDelaunayGenerator/level_set))(see [bdry_2d_delaunay]f).

!media framework/meshgenerators/bdry_2d_delaunay.png
      style=width:80%;
      id=bdry_2d_delaunay
      caption=The workflow of the `Boundary2DDelaunayGenerator` mesh generator.

As projection is used to enable the triangulation of the 2D surface, it is crucial to limit the angle deviation of the element normals in the 2D mesh from the average normal vector of the surface. This is controlled by the [!param](/Mesh/Boundary2DDelaunayGenerator/max_angle_deviation) parameter. Deviation must be less than 90 degrees to avert overlapping elements. The projection also introduces errors in the element area control. The actual element area to be controlled are the projected areas of the elements in the 2D mesh. A projection correction method will potentially be developed in the future.

## Application

One common application of this mesh generator is to prepare 2D surface meshes to be used as input for 3D Delaunay mesh generation([XYZelaunayGenerator](XYZDelaunayGenerator.md)). For a raw 3D mesh with a closed 2D surface, the 2D surface can be divided into multiple regions to be compatible with the triangulation method with projection. `Boundary2DDelaunayGenerator` can be used to generate the 2D surface mesh with better mesh density and quality control. Especially, the surface generated by mesh cutting (e.g., [`CutMeshByPlaneGenerator`](CutMeshByPlaneGenerator.md) and [`CutMeshByLevelSetGenerator`](CutMeshByLevelSetGenerator.md)) can be improved. The generated 2D surfaces can then be stitched together to form a closed surface mesh for 3D Delaunay mesh generation. An example is give in [xyzd_example] with visualization in [example_cylinder].

!listing test/tests/meshgenerators/boundary_2d_delaunay_generator/cylinder.i block=Mesh
         id=xyzd_example
         caption=Example input file to use `Boundary2DDelaunayGenerator` to prepare a cylinder surface mesh for 3D Delaunay mesh generation.

!media framework/meshgenerators/cylinder.png
      style=width:80%;
      id=example_cylinder
      caption=The workflow of the `Boundary2DDelaunayGenerator` mesh generator.

!syntax parameters /Mesh/Boundary2DDelaunayGenerator

!syntax inputs /Mesh/Boundary2DDelaunayGenerator

!syntax children /Mesh/Boundary2DDelaunayGenerator
